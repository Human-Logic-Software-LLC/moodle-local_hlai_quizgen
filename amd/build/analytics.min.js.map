{"version":3,"file":"analytics.min.js","sources":["../src/analytics.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <https://www.gnu.org/licenses/>.\n\n/**\n * AI Quiz Generator - Analytics Module\n *\n * Handles chart rendering and data visualization\n * for the comprehensive analytics page.\n *\n * @module     local_hlai_quizgen/analytics\n * @copyright  2025 Human Logic Software LLC\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/* global ApexCharts */\ndefine(['jquery', 'local_hlai_quizgen/charts'], function($, Charts) {\n    'use strict';\n\n    /**\n     * Analytics controller\n     */\n    var Analytics = {\n        courseid: 0,\n        sesskey: '',\n        timerange: '30',\n        charts: {},\n\n        /**\n         * Initialize analytics page\n         * @param {object} config - Configuration object\n         */\n        init: function(config) {\n            this.courseid = config.courseid;\n            this.sesskey = config.sesskey;\n            this.timerange = config.timerange;\n            this.initData = config;\n\n            // Wait for ApexCharts to load\n            this.waitForApexCharts().then(function() {\n                Analytics.renderAllCharts();\n            });\n        },\n\n        /**\n         * Wait for ApexCharts library to be available\n         * @returns {Promise}\n         */\n        waitForApexCharts: function() {\n            return new Promise(function(resolve) {\n                if (typeof ApexCharts !== 'undefined') {\n                    resolve();\n                    return;\n                }\n\n                var attempts = 0;\n                var maxAttempts = 50;\n                var checkInterval = setInterval(function() {\n                    attempts++;\n                    if (typeof ApexCharts !== 'undefined') {\n                        clearInterval(checkInterval);\n                        resolve();\n                    } else if (attempts >= maxAttempts) {\n                        clearInterval(checkInterval);\n                        // ApexCharts did not load in time.\n                        resolve();\n                    }\n                }, 100);\n            });\n        },\n\n        /**\n         * Render all charts on the analytics page\n         */\n        renderAllCharts: function() {\n            var data = this.initData || {};\n            var stats = data.stats || {};\n\n            this.renderFunnelChart(stats);\n            this.renderQualityDistChart();\n            this.renderTypeAcceptanceChart(data.typeStats);\n            this.renderDifficultyAnalysisChart(data.difficultyStats);\n            this.renderBloomsCoverageChart(data.bloomsStats);\n            this.renderRegenDistChart();\n            this.renderRegenByDifficultyChart();\n            this.renderRejectionReasonsChart(data.rejectionReasons);\n            this.renderTrendsChart();\n        },\n\n        /**\n         * Render question review funnel chart\n         * @param {object} stats - Statistics data\n         */\n        renderFunnelChart: function(stats) {\n            if (!$('#funnel-chart').length || typeof ApexCharts === 'undefined') {\n                return;\n            }\n\n            var total = stats.totalQuestions || 0;\n            var approved = stats.approved || 0;\n            var pending = stats.pending || 0;\n\n            var options = {\n                series: [{\n                    name: 'Questions',\n                    data: [total, total - pending, approved, Math.round(approved * 0.8)]\n                }],\n                chart: {\n                    type: 'bar',\n                    height: 350,\n                    toolbar: { show: false }\n                },\n                plotOptions: {\n                    bar: {\n                        horizontal: true,\n                        borderRadius: 8,\n                        barHeight: '60%',\n                        distributed: true,\n                        dataLabels: {\n                            position: 'bottom'\n                        }\n                    }\n                },\n                colors: ['#4F46E5', '#F59E0B', '#10B981', '#06B6D4'],\n                dataLabels: {\n                    enabled: true,\n                    textAnchor: 'start',\n                    formatter: function(val, opt) {\n                        var labels = ['Generated', 'Reviewed', 'Approved', 'Deployed'];\n                        return labels[opt.dataPointIndex] + ': ' + val;\n                    },\n                    offsetX: 10,\n                    style: {\n                        fontSize: '14px',\n                        colors: ['#fff']\n                    }\n                },\n                xaxis: {\n                    categories: ['Generated', 'Reviewed', 'Approved', 'Deployed']\n                },\n                yaxis: {\n                    labels: { show: false }\n                },\n                legend: { show: false }\n            };\n\n            this.charts.funnel = new ApexCharts(document.querySelector('#funnel-chart'), options);\n            this.charts.funnel.render();\n        },\n\n        /**\n         * Render quality score distribution chart\n         */\n        renderQualityDistChart: function() {\n            if (!$('#quality-dist-chart').length || typeof ApexCharts === 'undefined') {\n                return;\n            }\n\n            // Simulated distribution - in production, this would come from AJAX\n            var distribution = [5, 10, 25, 35, 25]; // 0-20, 21-40, 41-60, 61-80, 81-100\n\n            var options = {\n                series: [{\n                    name: 'Questions',\n                    data: distribution\n                }],\n                chart: {\n                    type: 'bar',\n                    height: 350,\n                    toolbar: { show: false }\n                },\n                plotOptions: {\n                    bar: {\n                        borderRadius: 8,\n                        columnWidth: '60%',\n                        distributed: true\n                    }\n                },\n                colors: ['#EF4444', '#F97316', '#F59E0B', '#10B981', '#059669'],\n                dataLabels: {\n                    enabled: true,\n                    formatter: function(val) {\n                        return val + '%';\n                    }\n                },\n                xaxis: {\n                    categories: ['0-20', '21-40', '41-60', '61-80', '81-100'],\n                    title: { text: 'Quality Score Range' }\n                },\n                yaxis: {\n                    title: { text: 'Percentage of Questions' }\n                },\n                legend: { show: false }\n            };\n\n            this.charts.qualityDist = new ApexCharts(document.querySelector('#quality-dist-chart'), options);\n            this.charts.qualityDist.render();\n        },\n\n        /**\n         * Render question type acceptance chart\n         * @param {array} typeStats - Type statistics data\n         */\n        renderTypeAcceptanceChart: function(typeStats) {\n            if (!$('#type-acceptance-chart').length || typeof ApexCharts === 'undefined' || !typeStats) {\n                return;\n            }\n\n            var categories = [];\n            var totalData = [];\n            var approvedData = [];\n\n            typeStats.forEach(function(item) {\n                if (item.questiontype) {\n                    categories.push(Analytics.formatQuestionType(item.questiontype));\n                    totalData.push(parseInt(item.count) || 0);\n                    approvedData.push(parseInt(item.approved) || 0);\n                }\n            });\n\n            var options = {\n                series: [\n                    { name: 'Total', data: totalData },\n                    { name: 'Approved', data: approvedData }\n                ],\n                chart: {\n                    type: 'bar',\n                    height: 350,\n                    toolbar: { show: false }\n                },\n                plotOptions: {\n                    bar: {\n                        horizontal: false,\n                        columnWidth: '55%',\n                        borderRadius: 4\n                    }\n                },\n                colors: ['#94A3B8', '#10B981'],\n                dataLabels: { enabled: false },\n                xaxis: { categories: categories },\n                yaxis: { title: { text: 'Number of Questions' } },\n                legend: {\n                    position: 'top',\n                    horizontalAlign: 'right'\n                },\n                fill: { opacity: 1 }\n            };\n\n            this.charts.typeAcceptance = new ApexCharts(document.querySelector('#type-acceptance-chart'), options);\n            this.charts.typeAcceptance.render();\n        },\n\n        /**\n         * Render difficulty analysis chart\n         * @param {array} difficultyStats - Difficulty statistics\n         */\n        renderDifficultyAnalysisChart: function(difficultyStats) {\n            if (!$('#difficulty-analysis-chart').length || typeof ApexCharts === 'undefined' || !difficultyStats) {\n                return;\n            }\n\n            var series = [];\n            var labels = [];\n\n            difficultyStats.forEach(function(item) {\n                if (item.difficulty) {\n                    labels.push(item.difficulty.charAt(0).toUpperCase() + item.difficulty.slice(1));\n                    series.push(parseInt(item.count) || 0);\n                }\n            });\n\n            this.charts.difficultyAnalysis = Charts.createDonutChart('#difficulty-analysis-chart', {\n                series: series,\n                labels: labels,\n                colors: ['#10B981', '#F59E0B', '#EF4444'],\n                height: 350\n            });\n        },\n\n        /**\n         * Render Bloom's taxonomy coverage chart\n         * @param {array} bloomsStats - Bloom's statistics\n         */\n        renderBloomsCoverageChart: function(bloomsStats) {\n            if (!$('#blooms-coverage-chart').length || typeof ApexCharts === 'undefined' || !bloomsStats) {\n                return;\n            }\n\n            var bloomsOrder = ['remember', 'understand', 'apply', 'analyze', 'evaluate', 'create'];\n            var bloomsLabels = ['Remember', 'Understand', 'Apply', 'Analyze', 'Evaluate', 'Create'];\n            var series = [];\n\n            bloomsOrder.forEach(function(level) {\n                var found = bloomsStats.find(function(item) {\n                    return item.blooms_level && item.blooms_level.toLowerCase() === level;\n                });\n                series.push(found ? parseInt(found.count) || 0 : 0);\n            });\n\n            // Use custom radar chart with filled styling like dashboard\n            var options = {\n                series: [{ name: 'Questions', data: series }],\n                chart: {\n                    type: 'radar',\n                    height: 350,\n                    toolbar: { show: false },\n                    animations: {\n                        enabled: true,\n                        speed: 800\n                    }\n                },\n                xaxis: {\n                    categories: bloomsLabels,\n                    labels: {\n                        show: true,\n                        style: {\n                            colors: ['#4F46E5', '#7C3AED', '#EC4899', '#F59E0B', '#10B981', '#3B82F6'],\n                            fontSize: '13px',\n                            fontWeight: 600\n                        }\n                    }\n                },\n                yaxis: {\n                    show: false,\n                    labels: { show: false },\n                    tickAmount: 0\n                },\n                grid: { show: false },\n                fill: {\n                    opacity: 0.2,\n                    type: 'solid'\n                },\n                stroke: {\n                    width: 2,\n                    colors: ['#4F46E5']\n                },\n                markers: {\n                    size: 5,\n                    colors: ['#4F46E5'],\n                    strokeColors: '#fff',\n                    strokeWidth: 2,\n                    hover: { size: 7 }\n                },\n                colors: ['#4F46E5'],\n                legend: { show: false },\n                dataLabels: { enabled: false }\n            };\n\n            this.charts.bloomsCoverage = new ApexCharts(document.querySelector('#blooms-coverage-chart'), options);\n            this.charts.bloomsCoverage.render();\n        },\n\n        /**\n         * Render regeneration distribution chart\n         */\n        renderRegenDistChart: function() {\n            if (!$('#regen-dist-chart').length || typeof ApexCharts === 'undefined') {\n                return;\n            }\n\n            // Simulated data - in production from AJAX\n            var options = {\n                series: [{\n                    name: 'Questions',\n                    data: [65, 20, 10, 3, 2]\n                }],\n                chart: {\n                    type: 'bar',\n                    height: 280,\n                    toolbar: { show: false }\n                },\n                plotOptions: {\n                    bar: {\n                        borderRadius: 4,\n                        columnWidth: '50%',\n                        distributed: true\n                    }\n                },\n                colors: ['#10B981', '#22C55E', '#F59E0B', '#F97316', '#EF4444'],\n                dataLabels: {\n                    enabled: true,\n                    formatter: function(val) {\n                        return val + '%';\n                    }\n                },\n                xaxis: {\n                    categories: ['0', '1', '2', '3', '4+'],\n                    title: { text: 'Number of Regenerations' }\n                },\n                yaxis: {\n                    title: { text: 'Percentage' }\n                },\n                legend: { show: false }\n            };\n\n            this.charts.regenDist = new ApexCharts(document.querySelector('#regen-dist-chart'), options);\n            this.charts.regenDist.render();\n        },\n\n        /**\n         * Render regeneration by difficulty chart\n         */\n        renderRegenByDifficultyChart: function() {\n            if (!$('#regen-by-difficulty-chart').length || typeof ApexCharts === 'undefined') {\n                return;\n            }\n\n            var options = {\n                series: [{\n                    name: 'Avg Regenerations',\n                    data: [0.8, 1.2, 1.8]\n                }],\n                chart: {\n                    type: 'bar',\n                    height: 280,\n                    toolbar: { show: false }\n                },\n                plotOptions: {\n                    bar: {\n                        horizontal: true,\n                        borderRadius: 4,\n                        barHeight: '50%',\n                        distributed: true\n                    }\n                },\n                colors: ['#10B981', '#F59E0B', '#EF4444'],\n                dataLabels: { enabled: true },\n                xaxis: {\n                    categories: ['Easy', 'Medium', 'Hard'],\n                    title: { text: 'Avg Regenerations' }\n                },\n                legend: { show: false }\n            };\n\n            this.charts.regenByDiff = new ApexCharts(document.querySelector('#regen-by-difficulty-chart'), options);\n            this.charts.regenByDiff.render();\n        },\n\n        /**\n         * Render rejection reasons chart\n         * @param {array} rejectionReasons - Rejection reasons data\n         */\n        renderRejectionReasonsChart: function(rejectionReasons) {\n            if (!$('#rejection-reasons-chart').length || typeof ApexCharts === 'undefined' ||\n                    !rejectionReasons || rejectionReasons.length === 0) {\n                return;\n            }\n\n            var series = [];\n            var labels = [];\n\n            rejectionReasons.forEach(function(item) {\n                labels.push(item.reason || 'Not specified');\n                series.push(parseInt(item.count) || 0);\n            });\n\n            this.charts.rejectionReasons = Charts.createDonutChart('#rejection-reasons-chart', {\n                series: series,\n                labels: labels,\n                colors: ['#EF4444', '#F97316', '#F59E0B', '#6366F1', '#8B5CF6'],\n                height: 300\n            });\n        },\n\n        /**\n         * Render trends over time chart\n         */\n        renderTrendsChart: function() {\n            if (!$('#trends-chart').length || typeof ApexCharts === 'undefined') {\n                return;\n            }\n\n            // Simulated trend data - in production from AJAX\n            var categories = [];\n            var now = new Date();\n            for (var i = 29; i >= 0; i--) {\n                var date = new Date(now);\n                date.setDate(date.getDate() - i);\n                categories.push(date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }));\n            }\n\n            // Simulated data\n            var generated = [];\n            var approved = [];\n            for (var j = 0; j < 30; j++) {\n                var gen = Math.floor(Math.random() * 15) + 5;\n                generated.push(gen);\n                approved.push(Math.floor(gen * (0.6 + Math.random() * 0.3)));\n            }\n\n            var options = {\n                series: [\n                    { name: 'Generated', data: generated },\n                    { name: 'Approved', data: approved }\n                ],\n                chart: {\n                    type: 'area',\n                    height: 350,\n                    toolbar: { show: false },\n                    zoom: { enabled: false }\n                },\n                dataLabels: { enabled: false },\n                stroke: {\n                    curve: 'smooth',\n                    width: 2\n                },\n                colors: ['#4F46E5', '#10B981'],\n                fill: {\n                    type: 'gradient',\n                    gradient: {\n                        opacityFrom: 0.4,\n                        opacityTo: 0.1\n                    }\n                },\n                xaxis: {\n                    categories: categories,\n                    labels: {\n                        rotate: -45,\n                        rotateAlways: true\n                    }\n                },\n                yaxis: {\n                    title: { text: 'Questions' }\n                },\n                legend: {\n                    position: 'top',\n                    horizontalAlign: 'right'\n                },\n                tooltip: {\n                    x: { format: 'MMM dd' }\n                }\n            };\n\n            this.charts.trends = new ApexCharts(document.querySelector('#trends-chart'), options);\n            this.charts.trends.render();\n        },\n\n        /**\n         * Format question type for display\n         * @param {string} type - Raw question type\n         * @returns {string} Formatted type name\n         */\n        formatQuestionType: function(type) {\n            var typeMap = {\n                'multichoice': 'MCQ',\n                'truefalse': 'T/F',\n                'shortanswer': 'Short',\n                'essay': 'Essay',\n                'numerical': 'Num',\n                'matching': 'Match',\n                'ordering': 'Order',\n                'cloze': 'Cloze'\n            };\n            return typeMap[type] || type;\n        }\n    };\n\n    return {\n        /**\n         * Module initialization entry point\n         * @param {Object} config - Configuration object with courseid, sesskey, timerange, stats, etc.\n         */\n        init: function(config) {\n            $(document).ready(function() {\n                Analytics.init(config);\n            });\n        }\n    };\n});\n"],"names":["define","$","Charts","Analytics","courseid","sesskey","timerange","charts","init","config","initData","waitForApexCharts","then","renderAllCharts","Promise","resolve","ApexCharts","attempts","checkInterval","setInterval","clearInterval","data","this","stats","renderFunnelChart","renderQualityDistChart","renderTypeAcceptanceChart","typeStats","renderDifficultyAnalysisChart","difficultyStats","renderBloomsCoverageChart","bloomsStats","renderRegenDistChart","renderRegenByDifficultyChart","renderRejectionReasonsChart","rejectionReasons","renderTrendsChart","length","total","totalQuestions","approved","options","series","name","pending","Math","round","chart","type","height","toolbar","show","plotOptions","bar","horizontal","borderRadius","barHeight","distributed","dataLabels","position","colors","enabled","textAnchor","formatter","val","opt","dataPointIndex","offsetX","style","fontSize","xaxis","categories","yaxis","labels","legend","funnel","document","querySelector","render","columnWidth","title","text","qualityDist","totalData","approvedData","forEach","item","questiontype","push","formatQuestionType","parseInt","count","horizontalAlign","fill","opacity","typeAcceptance","difficulty","charAt","toUpperCase","slice","difficultyAnalysis","createDonutChart","level","found","find","blooms_level","toLowerCase","animations","speed","fontWeight","tickAmount","grid","stroke","width","markers","size","strokeColors","strokeWidth","hover","bloomsCoverage","regenDist","regenByDiff","reason","now","Date","i","date","setDate","getDate","toLocaleDateString","month","day","generated","j","gen","floor","random","zoom","curve","gradient","opacityFrom","opacityTo","rotate","rotateAlways","tooltip","x","format","trends","ready"],"mappings":"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"}