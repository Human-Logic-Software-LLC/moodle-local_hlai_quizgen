{"version":3,"file":"analytics.min.js","sources":["../src/analytics.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <https://www.gnu.org/licenses/>.\n\n/**\n * AI Quiz Generator - Analytics Module\n *\n * Handles chart rendering and data visualization\n * for the comprehensive analytics page.\n *\n * @module     local_hlai_quizgen/analytics\n * @copyright  2025 Human Logic Software LLC\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/* global ApexCharts */\ndefine(['jquery', 'local_hlai_quizgen/charts'], function($, Charts) {\n    'use strict';\n\n    /**\n     * Analytics controller\n     */\n    var Analytics = {\n        courseid: 0,\n        sesskey: '',\n        timerange: '30',\n        charts: {},\n\n        /**\n         * Initialize analytics page\n         * @param {object} config - Configuration object\n         */\n        init: function(config) {\n            this.courseid = config.courseid;\n            this.sesskey = config.sesskey;\n            this.timerange = config.timerange;\n            this.initData = config;\n\n            // Wait for ApexCharts to load\n            this.waitForApexCharts().then(function() {\n                Analytics.renderAllCharts();\n                return undefined;\n            }).catch(function() {\n                // ApexCharts loading failed silently.\n            });\n        },\n\n        /**\n         * Wait for ApexCharts library to be available\n         * @returns {Promise}\n         */\n        waitForApexCharts: function() {\n            return new Promise(function(resolve) {\n                if (typeof ApexCharts !== 'undefined') {\n                    resolve();\n                    return;\n                }\n\n                var attempts = 0;\n                var maxAttempts = 50;\n                var checkInterval = setInterval(function() {\n                    attempts++;\n                    if (typeof ApexCharts !== 'undefined') {\n                        clearInterval(checkInterval);\n                        resolve();\n                    } else if (attempts >= maxAttempts) {\n                        clearInterval(checkInterval);\n                        // ApexCharts did not load in time.\n                        resolve();\n                    }\n                }, 100);\n            });\n        },\n\n        /**\n         * Render all charts on the analytics page\n         */\n        renderAllCharts: function() {\n            var data = this.initData || {};\n            var stats = data.stats || {};\n\n            this.renderFunnelChart(stats);\n            this.renderQualityDistChart();\n            this.renderTypeAcceptanceChart(data.typeStats);\n            this.renderDifficultyAnalysisChart(data.difficultyStats);\n            this.renderBloomsCoverageChart(data.bloomsStats);\n            this.renderRegenDistChart();\n            this.renderRegenByDifficultyChart();\n            this.renderRejectionReasonsChart(data.rejectionReasons);\n            this.renderTrendsChart();\n        },\n\n        /**\n         * Render question review funnel chart\n         * @param {object} stats - Statistics data\n         */\n        renderFunnelChart: function(stats) {\n            if (!$('#funnel-chart').length || typeof ApexCharts === 'undefined') {\n                return;\n            }\n\n            var total = stats.totalQuestions || 0;\n            var approved = stats.approved || 0;\n            var pending = stats.pending || 0;\n\n            var options = {\n                series: [{\n                    name: 'Questions',\n                    data: [total, total - pending, approved, Math.round(approved * 0.8)]\n                }],\n                chart: {\n                    type: 'bar',\n                    height: 350,\n                    toolbar: {show: false}\n                },\n                plotOptions: {\n                    bar: {\n                        horizontal: true,\n                        borderRadius: 8,\n                        barHeight: '60%',\n                        distributed: true,\n                        dataLabels: {\n                            position: 'bottom'\n                        }\n                    }\n                },\n                colors: ['#4F46E5', '#F59E0B', '#10B981', '#06B6D4'],\n                dataLabels: {\n                    enabled: true,\n                    textAnchor: 'start',\n                    formatter: function(val, opt) {\n                        var labels = ['Generated', 'Reviewed', 'Approved', 'Deployed'];\n                        return labels[opt.dataPointIndex] + ': ' + val;\n                    },\n                    offsetX: 10,\n                    style: {\n                        fontSize: '14px',\n                        colors: ['#fff']\n                    }\n                },\n                xaxis: {\n                    categories: ['Generated', 'Reviewed', 'Approved', 'Deployed']\n                },\n                yaxis: {\n                    labels: {show: false}\n                },\n                legend: {show: false}\n            };\n\n            this.charts.funnel = new ApexCharts(document.querySelector('#funnel-chart'), options);\n            this.charts.funnel.render();\n        },\n\n        /**\n         * Render quality score distribution chart\n         */\n        renderQualityDistChart: function() {\n            if (!$('#quality-dist-chart').length || typeof ApexCharts === 'undefined') {\n                return;\n            }\n\n            // Simulated distribution - in production, this would come from AJAX\n            var distribution = [5, 10, 25, 35, 25]; // 0-20, 21-40, 41-60, 61-80, 81-100\n\n            var options = {\n                series: [{\n                    name: 'Questions',\n                    data: distribution\n                }],\n                chart: {\n                    type: 'bar',\n                    height: 350,\n                    toolbar: {show: false}\n                },\n                plotOptions: {\n                    bar: {\n                        borderRadius: 8,\n                        columnWidth: '60%',\n                        distributed: true\n                    }\n                },\n                colors: ['#EF4444', '#F97316', '#F59E0B', '#10B981', '#059669'],\n                dataLabels: {\n                    enabled: true,\n                    formatter: function(val) {\n                        return val + '%';\n                    }\n                },\n                xaxis: {\n                    categories: ['0-20', '21-40', '41-60', '61-80', '81-100'],\n                    title: {text: 'Quality Score Range'}\n                },\n                yaxis: {\n                    title: {text: 'Percentage of Questions'}\n                },\n                legend: {show: false}\n            };\n\n            this.charts.qualityDist = new ApexCharts(document.querySelector('#quality-dist-chart'), options);\n            this.charts.qualityDist.render();\n        },\n\n        /**\n         * Render question type acceptance chart\n         * @param {array} typeStats - Type statistics data\n         */\n        renderTypeAcceptanceChart: function(typeStats) {\n            if (!$('#type-acceptance-chart').length || typeof ApexCharts === 'undefined' || !typeStats) {\n                return;\n            }\n\n            var categories = [];\n            var totalData = [];\n            var approvedData = [];\n\n            typeStats.forEach(function(item) {\n                if (item.questiontype) {\n                    categories.push(Analytics.formatQuestionType(item.questiontype));\n                    totalData.push(parseInt(item.count) || 0);\n                    approvedData.push(parseInt(item.approved) || 0);\n                }\n            });\n\n            var options = {\n                series: [\n                    {name: 'Total', data: totalData},\n                    {name: 'Approved', data: approvedData}\n                ],\n                chart: {\n                    type: 'bar',\n                    height: 350,\n                    toolbar: {show: false}\n                },\n                plotOptions: {\n                    bar: {\n                        horizontal: false,\n                        columnWidth: '55%',\n                        borderRadius: 4\n                    }\n                },\n                colors: ['#94A3B8', '#10B981'],\n                dataLabels: {enabled: false},\n                xaxis: {categories: categories},\n                yaxis: {title: {text: 'Number of Questions'}},\n                legend: {\n                    position: 'top',\n                    horizontalAlign: 'right'\n                },\n                fill: {opacity: 1}\n            };\n\n            this.charts.typeAcceptance = new ApexCharts(document.querySelector('#type-acceptance-chart'), options);\n            this.charts.typeAcceptance.render();\n        },\n\n        /**\n         * Render difficulty analysis chart\n         * @param {array} difficultyStats - Difficulty statistics\n         */\n        renderDifficultyAnalysisChart: function(difficultyStats) {\n            if (!$('#difficulty-analysis-chart').length || typeof ApexCharts === 'undefined' || !difficultyStats) {\n                return;\n            }\n\n            var series = [];\n            var labels = [];\n\n            difficultyStats.forEach(function(item) {\n                if (item.difficulty) {\n                    labels.push(item.difficulty.charAt(0).toUpperCase() + item.difficulty.slice(1));\n                    series.push(parseInt(item.count) || 0);\n                }\n            });\n\n            this.charts.difficultyAnalysis = Charts.createDonutChart('#difficulty-analysis-chart', {\n                series: series,\n                labels: labels,\n                colors: ['#10B981', '#F59E0B', '#EF4444'],\n                height: 350\n            });\n        },\n\n        /**\n         * Render Bloom's taxonomy coverage chart\n         * @param {array} bloomsStats - Bloom's statistics\n         */\n        renderBloomsCoverageChart: function(bloomsStats) {\n            if (!$('#blooms-coverage-chart').length || typeof ApexCharts === 'undefined' || !bloomsStats) {\n                return;\n            }\n\n            var bloomsOrder = ['remember', 'understand', 'apply', 'analyze', 'evaluate', 'create'];\n            var bloomsLabels = ['Remember', 'Understand', 'Apply', 'Analyze', 'Evaluate', 'Create'];\n            var series = [];\n\n            bloomsOrder.forEach(function(level) {\n                var found = bloomsStats.find(function(item) {\n                    return item.blooms_level && item.blooms_level.toLowerCase() === level;\n                });\n                series.push(found ? parseInt(found.count) || 0 : 0);\n            });\n\n            // Use custom radar chart with filled styling like dashboard\n            var options = {\n                series: [{name: 'Questions', data: series}],\n                chart: {\n                    type: 'radar',\n                    height: 350,\n                    toolbar: {show: false},\n                    animations: {\n                        enabled: true,\n                        speed: 800\n                    }\n                },\n                xaxis: {\n                    categories: bloomsLabels,\n                    labels: {\n                        show: true,\n                        style: {\n                            colors: ['#4F46E5', '#7C3AED', '#EC4899', '#F59E0B', '#10B981', '#3B82F6'],\n                            fontSize: '13px',\n                            fontWeight: 600\n                        }\n                    }\n                },\n                yaxis: {\n                    show: false,\n                    labels: {show: false},\n                    tickAmount: 0\n                },\n                grid: {show: false},\n                fill: {\n                    opacity: 0.2,\n                    type: 'solid'\n                },\n                stroke: {\n                    width: 2,\n                    colors: ['#4F46E5']\n                },\n                markers: {\n                    size: 5,\n                    colors: ['#4F46E5'],\n                    strokeColors: '#fff',\n                    strokeWidth: 2,\n                    hover: {size: 7}\n                },\n                colors: ['#4F46E5'],\n                legend: {show: false},\n                dataLabels: {enabled: false}\n            };\n\n            this.charts.bloomsCoverage = new ApexCharts(document.querySelector('#blooms-coverage-chart'), options);\n            this.charts.bloomsCoverage.render();\n        },\n\n        /**\n         * Render regeneration distribution chart\n         */\n        renderRegenDistChart: function() {\n            if (!$('#regen-dist-chart').length || typeof ApexCharts === 'undefined') {\n                return;\n            }\n\n            // Simulated data - in production from AJAX\n            var options = {\n                series: [{\n                    name: 'Questions',\n                    data: [65, 20, 10, 3, 2]\n                }],\n                chart: {\n                    type: 'bar',\n                    height: 280,\n                    toolbar: {show: false}\n                },\n                plotOptions: {\n                    bar: {\n                        borderRadius: 4,\n                        columnWidth: '50%',\n                        distributed: true\n                    }\n                },\n                colors: ['#10B981', '#22C55E', '#F59E0B', '#F97316', '#EF4444'],\n                dataLabels: {\n                    enabled: true,\n                    formatter: function(val) {\n                        return val + '%';\n                    }\n                },\n                xaxis: {\n                    categories: ['0', '1', '2', '3', '4+'],\n                    title: {text: 'Number of Regenerations'}\n                },\n                yaxis: {\n                    title: {text: 'Percentage'}\n                },\n                legend: {show: false}\n            };\n\n            this.charts.regenDist = new ApexCharts(document.querySelector('#regen-dist-chart'), options);\n            this.charts.regenDist.render();\n        },\n\n        /**\n         * Render regeneration by difficulty chart\n         */\n        renderRegenByDifficultyChart: function() {\n            if (!$('#regen-by-difficulty-chart').length || typeof ApexCharts === 'undefined') {\n                return;\n            }\n\n            var options = {\n                series: [{\n                    name: 'Avg Regenerations',\n                    data: [0.8, 1.2, 1.8]\n                }],\n                chart: {\n                    type: 'bar',\n                    height: 280,\n                    toolbar: {show: false}\n                },\n                plotOptions: {\n                    bar: {\n                        horizontal: true,\n                        borderRadius: 4,\n                        barHeight: '50%',\n                        distributed: true\n                    }\n                },\n                colors: ['#10B981', '#F59E0B', '#EF4444'],\n                dataLabels: {enabled: true},\n                xaxis: {\n                    categories: ['Easy', 'Medium', 'Hard'],\n                    title: {text: 'Avg Regenerations'}\n                },\n                legend: {show: false}\n            };\n\n            this.charts.regenByDiff = new ApexCharts(document.querySelector('#regen-by-difficulty-chart'), options);\n            this.charts.regenByDiff.render();\n        },\n\n        /**\n         * Render rejection reasons chart\n         * @param {array} rejectionReasons - Rejection reasons data\n         */\n        renderRejectionReasonsChart: function(rejectionReasons) {\n            if (!$('#rejection-reasons-chart').length || typeof ApexCharts === 'undefined' ||\n                    !rejectionReasons || rejectionReasons.length === 0) {\n                return;\n            }\n\n            var series = [];\n            var labels = [];\n\n            rejectionReasons.forEach(function(item) {\n                labels.push(item.reason || 'Not specified');\n                series.push(parseInt(item.count) || 0);\n            });\n\n            this.charts.rejectionReasons = Charts.createDonutChart('#rejection-reasons-chart', {\n                series: series,\n                labels: labels,\n                colors: ['#EF4444', '#F97316', '#F59E0B', '#6366F1', '#8B5CF6'],\n                height: 300\n            });\n        },\n\n        /**\n         * Render trends over time chart\n         */\n        renderTrendsChart: function() {\n            if (!$('#trends-chart').length || typeof ApexCharts === 'undefined') {\n                return;\n            }\n\n            // Simulated trend data - in production from AJAX\n            var categories = [];\n            var now = new Date();\n            for (var i = 29; i >= 0; i--) {\n                var date = new Date(now);\n                date.setDate(date.getDate() - i);\n                categories.push(date.toLocaleDateString('en-US', {month: 'short', day: 'numeric'}));\n            }\n\n            // Simulated data\n            var generated = [];\n            var approved = [];\n            for (var j = 0; j < 30; j++) {\n                var gen = Math.floor(Math.random() * 15) + 5;\n                generated.push(gen);\n                approved.push(Math.floor(gen * (0.6 + Math.random() * 0.3)));\n            }\n\n            var options = {\n                series: [\n                    {name: 'Generated', data: generated},\n                    {name: 'Approved', data: approved}\n                ],\n                chart: {\n                    type: 'area',\n                    height: 350,\n                    toolbar: {show: false},\n                    zoom: {enabled: false}\n                },\n                dataLabels: {enabled: false},\n                stroke: {\n                    curve: 'smooth',\n                    width: 2\n                },\n                colors: ['#4F46E5', '#10B981'],\n                fill: {\n                    type: 'gradient',\n                    gradient: {\n                        opacityFrom: 0.4,\n                        opacityTo: 0.1\n                    }\n                },\n                xaxis: {\n                    categories: categories,\n                    labels: {\n                        rotate: -45,\n                        rotateAlways: true\n                    }\n                },\n                yaxis: {\n                    title: {text: 'Questions'}\n                },\n                legend: {\n                    position: 'top',\n                    horizontalAlign: 'right'\n                },\n                tooltip: {\n                    x: {format: 'MMM dd'}\n                }\n            };\n\n            this.charts.trends = new ApexCharts(document.querySelector('#trends-chart'), options);\n            this.charts.trends.render();\n        },\n\n        /**\n         * Format question type for display\n         * @param {string} type - Raw question type\n         * @returns {string} Formatted type name\n         */\n        formatQuestionType: function(type) {\n            var typeMap = {\n                'multichoice': 'MCQ',\n                'truefalse': 'T/F',\n                'shortanswer': 'Short',\n                'essay': 'Essay',\n                'numerical': 'Num',\n                'matching': 'Match',\n                'ordering': 'Order',\n                'cloze': 'Cloze'\n            };\n            return typeMap[type] || type;\n        }\n    };\n\n    return {\n        /**\n         * Module initialization entry point\n         * @param {Object} config - Configuration object with courseid, sesskey, timerange, stats, etc.\n         */\n        init: function(config) {\n            $(document).ready(function() {\n                Analytics.init(config);\n            });\n        }\n    };\n});\n"],"names":["define","$","Charts","Analytics","courseid","sesskey","timerange","charts","init","config","this","initData","waitForApexCharts","then","renderAllCharts","catch","Promise","resolve","ApexCharts","attempts","checkInterval","setInterval","clearInterval","data","stats","renderFunnelChart","renderQualityDistChart","renderTypeAcceptanceChart","typeStats","renderDifficultyAnalysisChart","difficultyStats","renderBloomsCoverageChart","bloomsStats","renderRegenDistChart","renderRegenByDifficultyChart","renderRejectionReasonsChart","rejectionReasons","renderTrendsChart","length","total","totalQuestions","approved","options","series","name","pending","Math","round","chart","type","height","toolbar","show","plotOptions","bar","horizontal","borderRadius","barHeight","distributed","dataLabels","position","colors","enabled","textAnchor","formatter","val","opt","labels","dataPointIndex","offsetX","style","fontSize","xaxis","categories","yaxis","legend","funnel","document","querySelector","render","columnWidth","title","text","qualityDist","totalData","approvedData","forEach","item","questiontype","push","formatQuestionType","parseInt","count","horizontalAlign","fill","opacity","typeAcceptance","difficulty","charAt","toUpperCase","slice","difficultyAnalysis","createDonutChart","level","found","find","blooms_level","toLowerCase","animations","speed","fontWeight","tickAmount","grid","stroke","width","markers","size","strokeColors","strokeWidth","hover","bloomsCoverage","regenDist","regenByDiff","reason","now","Date","i","date","setDate","getDate","toLocaleDateString","month","day","generated","j","gen","floor","random","zoom","curve","gradient","opacityFrom","opacityTo","rotate","rotateAlways","tooltip","x","format","trends","multichoice","truefalse","shortanswer","essay","numerical","matching","ordering","cloze","ready"],"mappings":"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"}