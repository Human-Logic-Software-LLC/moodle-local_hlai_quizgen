{"version":3,"file":"dashboard.min.js","sources":["../src/dashboard.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <https://www.gnu.org/licenses/>.\n\n/**\n * AI Quiz Generator - Dashboard Module\n *\n * Handles dashboard initialization, AJAX data fetching,\n * and chart rendering for the teacher dashboard.\n *\n * @module     local_hlai_quizgen/dashboard\n * @copyright  2025 Human Logic Software LLC\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/* global ApexCharts */\ndefine(['jquery', 'core/ajax', 'local_hlai_quizgen/charts'], function($, Ajax, Charts) {\n    'use strict';\n\n    /**\n     * Dashboard controller\n     */\n    var Dashboard = {\n        courseid: 0,\n        refreshInterval: null,\n        charts: {},\n\n        /**\n         * Initialize the dashboard\n         * @param {object} config - Configuration object\n         */\n        init: function(config) {\n            this.courseid = config.courseid;\n            this.initData = config;\n\n            // Wait for ApexCharts to load\n            this.waitForApexCharts().then(function() {\n                Dashboard.initializeCharts();\n                Dashboard.loadChartData();\n                Dashboard.setupEventListeners();\n                return undefined;\n            }).catch(function() {\n                // ApexCharts loading failed silently.\n            });\n        },\n\n        /**\n         * Wait for ApexCharts library to be available\n         * @returns {Promise}\n         */\n        waitForApexCharts: function() {\n            return new Promise(function(resolve) {\n                if (typeof ApexCharts !== 'undefined') {\n                    resolve();\n                    return;\n                }\n\n                var attempts = 0;\n                var maxAttempts = 50;\n                var checkInterval = setInterval(function() {\n                    attempts++;\n                    if (typeof ApexCharts !== 'undefined') {\n                        clearInterval(checkInterval);\n                        resolve();\n                    } else if (attempts >= maxAttempts) {\n                        clearInterval(checkInterval);\n                        // ApexCharts did not load in time.\n                        resolve();\n                    }\n                }, 100);\n            });\n        },\n\n        /**\n         * Initialize all dashboard charts with loading states\n         */\n        initializeCharts: function() {\n            var stats = this.initData.stats || {};\n\n            // FTAR Gauge Chart\n            if ($('#ftar-gauge-chart').length && typeof ApexCharts !== 'undefined') {\n                this.charts.ftarGauge = Charts.createRadialChart('#ftar-gauge-chart', {\n                    series: [stats.ftar || 0],\n                    labels: ['First-Time Acceptance'],\n                    colors: [this.getFtarColor(stats.ftar || 0)],\n                    height: 280,\n                    plotOptions: {\n                        radialBar: {\n                            startAngle: -135,\n                            endAngle: 135,\n                            hollow: {\n                                margin: 0,\n                                size: '70%',\n                                background: 'transparent'\n                            },\n                            track: {\n                                background: '#f0f0f0',\n                                strokeWidth: '100%'\n                            },\n                            dataLabels: {\n                                name: {\n                                    offsetY: -10,\n                                    color: '#666',\n                                    fontSize: '14px'\n                                },\n                                value: {\n                                    color: '#333',\n                                    fontSize: '36px',\n                                    fontWeight: 'bold',\n                                    formatter: function(val) {\n                                        return val.toFixed(1) + '%';\n                                    }\n                                }\n                            }\n                        }\n                    }\n                });\n            }\n\n            // Initialize type distribution from PHP data\n            var typeData = this.initData.typeDistribution || [];\n            if ($('#question-type-chart').length && typeData.length > 0 && typeof ApexCharts !== 'undefined') {\n                var labels = typeData.map(function(item) {\n                    return Dashboard.formatQuestionType(item.questiontype);\n                });\n                var series = typeData.map(function(item) {\n                    return parseInt(item.count, 10);\n                });\n                var colors = typeData.map(function(item) {\n                    return Charts.getQuestionTypeColor(item.questiontype);\n                });\n\n                this.charts.questionType = Charts.createDonutChart('#question-type-chart', {\n                    series: series,\n                    labels: labels,\n                    colors: colors,\n                    height: 280\n                });\n            }\n        },\n\n        /**\n         * Load chart data via AJAX\n         */\n        loadChartData: function() {\n            var self = this;\n\n            // Load acceptance trend\n            this.fetchData('acceptancetrend').then(function(data) {\n                self.renderAcceptanceTrendChart(data);\n                return undefined;\n            }).catch(function() {\n                // Data fetch handled by fetchData.\n            });\n\n            // Load difficulty distribution\n            this.fetchData('difficultydist').then(function(data) {\n                self.renderDifficultyChart(data);\n                return undefined;\n            }).catch(function() {\n                // Data fetch handled by fetchData.\n            });\n\n            // Load Bloom's distribution\n            this.fetchData('bloomsdist').then(function(data) {\n                self.renderBloomsCharts(data);\n                return undefined;\n            }).catch(function() {\n                // Data fetch handled by fetchData.\n            });\n\n            // Load regeneration by type\n            this.fetchData('regenbytype').then(function(data) {\n                self.renderRegenByTypeChart(data);\n                return undefined;\n            }).catch(function() {\n                // Data fetch handled by fetchData.\n            });\n        },\n\n        /**\n         * Fetch data from Moodle External Services.\n         * @param {string} action - The action identifier to perform.\n         * @returns {Promise}\n         */\n        fetchData: function(action) {\n            var cid = this.courseid || 0;\n            var methodMap = {\n                'acceptancetrend': {methodname: 'local_hlai_quizgen_get_acceptance_trend', args: {courseid: cid}},\n                'difficultydist': {methodname: 'local_hlai_quizgen_get_difficulty_distribution', args: {courseid: cid}},\n                'bloomsdist': {methodname: 'local_hlai_quizgen_get_blooms_distribution', args: {courseid: cid}},\n                'regenbytype': {methodname: 'local_hlai_quizgen_get_regeneration_by_type', args: {courseid: cid}}\n            };\n\n            var call = methodMap[action];\n            if (!call) {\n                return Promise.reject('Unknown action: ' + action);\n            }\n\n            return Ajax.call([call])[0].then(function(response) {\n                // The regeneration-by-type endpoint returns a JSON string in the 'data' key.\n                if (action === 'regenbytype') {\n                    return JSON.parse(response.data);\n                }\n                return response;\n            }).catch(function(error) {\n                // eslint-disable-next-line no-console\n                console.error('External service call failed for ' + action + ':', error);\n                return null;\n            });\n        },\n\n        /**\n         * Render acceptance trend line chart\n         * @param {object} data - Chart data\n         */\n        renderAcceptanceTrendChart: function(data) {\n            if (!data || !$('#acceptance-trend-chart').length || typeof ApexCharts === 'undefined') {\n                return;\n            }\n\n            // Clear loading skeleton\n            $('#acceptance-trend-chart').empty();\n\n            var categories = data.labels || [];\n            var acceptanceRates = data.acceptance_rates || [];\n            var ftarRates = data.ftar_rates || [];\n\n            if (categories.length === 0) {\n                $('#acceptance-trend-chart').html(\n                    '<div class=\"has-text-centered has-text-grey p-5\">' +\n                    '<p>Not enough data to show trends yet.</p>' +\n                    '<p class=\"mt-2\" style=\"font-size: 0.85rem;\">Generate more quizzes to see patterns.</p>' +\n                    '</div>'\n                );\n                return;\n            }\n\n            this.charts.acceptanceTrend = Charts.createLineChart('#acceptance-trend-chart', {\n                series: [\n                    {\n                        name: 'Acceptance Rate',\n                        data: acceptanceRates\n                    },\n                    {\n                        name: 'First-Time Acceptance',\n                        data: ftarRates\n                    }\n                ],\n                categories: categories,\n                colors: ['#4F46E5', '#10B981'],\n                height: 300,\n                stroke: {\n                    curve: 'smooth',\n                    width: 3\n                },\n                markers: {\n                    size: 5\n                },\n                yaxis: {\n                    min: 0,\n                    max: 100,\n                    labels: {\n                        formatter: function(val) {\n                            return val.toFixed(0) + '%';\n                        }\n                    }\n                }\n            });\n        },\n\n        /**\n         * Render difficulty distribution chart\n         * @param {object} data - Chart data\n         */\n        renderDifficultyChart: function(data) {\n            if (!data || !$('#difficulty-chart').length || typeof ApexCharts === 'undefined') {\n                return;\n            }\n\n            var difficulties = ['easy', 'medium', 'hard'];\n            var series = [];\n            var labels = [];\n            var colors = [];\n\n            difficulties.forEach(function(diff) {\n                var count = data[diff] || 0;\n                if (count > 0) {\n                    series.push(count);\n                    labels.push(diff.charAt(0).toUpperCase() + diff.slice(1));\n                    colors.push(Charts.getDifficultyColor(diff));\n                }\n            });\n\n            if (series.length === 0) {\n                $('#difficulty-chart').html(\n                    '<div class=\"has-text-centered has-text-grey p-5\">' +\n                    '<p>No difficulty data available</p>' +\n                    '</div>'\n                );\n                return;\n            }\n\n            this.charts.difficulty = Charts.createDonutChart('#difficulty-chart', {\n                series: series,\n                labels: labels,\n                colors: colors,\n                height: 280\n            });\n        },\n\n        /**\n         * Render Bloom's taxonomy charts\n         * @param {object} data - Chart data\n         */\n        renderBloomsCharts: function(data) {\n            if (!data || typeof ApexCharts === 'undefined') {\n                return;\n            }\n\n            var bloomsLevels = ['remember', 'understand', 'apply', 'analyze', 'evaluate', 'create'];\n            var bloomsLabels = ['Remember', 'Understand', 'Apply', 'Analyze', 'Evaluate', 'Create'];\n            var series = [];\n            var barColors = [];\n\n            bloomsLevels.forEach(function(level) {\n                series.push(data[level] || 0);\n                barColors.push(Charts.getBloomsColor(level));\n            });\n\n            // Enhanced Radar chart - ABSOLUTELY NO NUMBERS\n            if ($('#blooms-radar-chart').length) {\n                var radarOptions = {\n                    chart: {\n                        type: 'radar',\n                        height: 400,\n                        fontFamily: 'Inter, -apple-system, BlinkMacSystemFont, sans-serif',\n                        toolbar: {show: false},\n                        dropShadow: {\n                            enabled: true,\n                            blur: 4,\n                            left: 0,\n                            top: 0,\n                            opacity: 0.1\n                        }\n                    },\n                    series: [{\n                        name: 'Questions',\n                        data: series\n                    }],\n                    dataLabels: {\n                        enabled: false\n                    },\n                    xaxis: {\n                        categories: bloomsLabels,\n                        labels: {\n                            show: true,\n                            style: {\n                                colors: barColors,\n                                fontSize: '13px',\n                                fontWeight: 600\n                            }\n                        }\n                    },\n                    yaxis: {\n                        show: false,\n                        labels: {\n                            show: false\n                        },\n                        tickAmount: 0\n                    },\n                    grid: {\n                        show: false\n                    },\n                    fill: {\n                        opacity: 0.2,\n                        type: 'solid'\n                    },\n                    stroke: {\n                        width: 2,\n                        colors: ['#4F46E5']\n                    },\n                    markers: {\n                        size: 5,\n                        colors: ['#4F46E5'],\n                        strokeColors: '#fff',\n                        strokeWidth: 2,\n                        hover: {\n                            size: 7\n                        }\n                    },\n                    colors: ['#4F46E5'],\n                    legend: {\n                        show: false\n                    },\n                    tooltip: {\n                        enabled: true,\n                        y: {\n                            formatter: function(val) {\n                                return val + ' questions';\n                            }\n                        }\n                    },\n                    plotOptions: {\n                        radar: {\n                            size: 140,\n                            polygons: {\n                                strokeColors: '#E5E7EB',\n                                strokeWidth: 1,\n                                connectorColors: '#E5E7EB',\n                                fill: {\n                                    colors: ['#F9FAFB', '#F3F4F6']\n                                }\n                            }\n                        }\n                    }\n                };\n                this.charts.bloomsRadar = new ApexCharts(document.querySelector('#blooms-radar-chart'), radarOptions);\n                this.charts.bloomsRadar.render();\n            }\n\n            // Bar chart - NO LEGEND\n            if ($('#blooms-bar-chart').length) {\n                var barOptions = {\n                    chart: {\n                        type: 'bar',\n                        height: 400,\n                        fontFamily: 'Inter, -apple-system, BlinkMacSystemFont, sans-serif',\n                        toolbar: {show: false}\n                    },\n                    series: [{\n                        name: 'Questions',\n                        data: series\n                    }],\n                    plotOptions: {\n                        bar: {\n                            horizontal: true,\n                            borderRadius: 6,\n                            distributed: true,\n                            barHeight: '65%'\n                        }\n                    },\n                    dataLabels: {\n                        enabled: true,\n                        style: {\n                            fontSize: '13px',\n                            fontWeight: 'bold',\n                            colors: ['#fff']\n                        }\n                    },\n                    xaxis: {\n                        categories: bloomsLabels,\n                        labels: {\n                            style: {\n                                fontSize: '12px',\n                                colors: '#6B7280'\n                            }\n                        }\n                    },\n                    yaxis: {\n                        labels: {\n                            style: {\n                                fontSize: '13px',\n                                fontWeight: 500,\n                                colors: barColors\n                            }\n                        }\n                    },\n                    colors: barColors,\n                    legend: {\n                        show: false\n                    },\n                    tooltip: {\n                        y: {\n                            formatter: function(val) {\n                                return val + ' questions';\n                            }\n                        }\n                    }\n                };\n                this.charts.bloomsBar = new ApexCharts(document.querySelector('#blooms-bar-chart'), barOptions);\n                this.charts.bloomsBar.render();\n            }\n        },\n\n        /**\n         * Render regeneration by type chart\n         * @param {object} data - Chart data\n         */\n        renderRegenByTypeChart: function(data) {\n            if (!data || !$('#regen-by-type-chart').length || typeof ApexCharts === 'undefined') {\n                return;\n            }\n\n            var types = Object.keys(data);\n            var series = [];\n            var labels = [];\n            var colors = [];\n\n            types.forEach(function(type) {\n                var avgRegen = data[type].avg_regenerations || 0;\n                series.push(parseFloat(avgRegen.toFixed(2)));\n                labels.push(Dashboard.formatQuestionType(type));\n                colors.push(Charts.getQuestionTypeColor(type));\n            });\n\n            if (series.length === 0) {\n                $('#regen-by-type-chart').html(\n                    '<div class=\"has-text-centered has-text-grey p-4\">' +\n                    '<p>No regeneration data yet</p>' +\n                    '</div>'\n                );\n                return;\n            }\n\n            this.charts.regenByType = Charts.createBarChart('#regen-by-type-chart', {\n                series: [{\n                    name: 'Avg Regenerations',\n                    data: series\n                }],\n                categories: labels,\n                colors: colors,\n                horizontal: true,\n                height: 250,\n                distributed: true,\n                dataLabels: {\n                    enabled: true,\n                    formatter: function(val) {\n                        return val.toFixed(1);\n                    }\n                }\n            });\n        },\n\n        /**\n         * Setup event listeners\n         */\n        setupEventListeners: function() {\n            var self = this;\n\n            // Refresh data button (if exists)\n            $(document).on('click', '.js-refresh-dashboard', function(e) {\n                e.preventDefault();\n                self.refreshDashboard();\n            });\n\n            // Delete notification button\n            $(document).on('click', '.hlai-dismiss-notification, .hlai-notification .delete', function() {\n                $(this).closest('.notification, .hlai-notification').fadeOut(300, function() {\n                    $(this).remove();\n                });\n            });\n        },\n\n        /**\n         * Refresh all dashboard data\n         */\n        refreshDashboard: function() {\n            // Destroy existing charts\n            Object.keys(this.charts).forEach(function(key) {\n                if (Dashboard.charts[key] && typeof Dashboard.charts[key].destroy === 'function') {\n                    Dashboard.charts[key].destroy();\n                }\n            });\n            this.charts = {};\n\n            // Reload data\n            this.loadChartData();\n        },\n\n        /**\n         * Get color based on FTAR percentage\n         * @param {number} ftar - First-time acceptance rate\n         * @returns {string} Color hex code\n         */\n        getFtarColor: function(ftar) {\n            if (ftar >= 75) {\n                return '#10B981'; // Success green\n            } else if (ftar >= 60) {\n                return '#F59E0B'; // Warning yellow\n            } else if (ftar >= 45) {\n                return '#F97316'; // Orange\n            } else {\n                return '#EF4444'; // Danger red\n            }\n        },\n\n        /**\n         * Format question type for display\n         * @param {string} type - Raw question type\n         * @returns {string} Formatted type name\n         */\n        formatQuestionType: function(type) {\n            var typeMap = {\n                'multichoice': 'Multiple Choice',\n                'truefalse': 'True/False',\n                'shortanswer': 'Short Answer',\n                'essay': 'Essay',\n                'numerical': 'Numerical',\n                'matching': 'Matching',\n                'ordering': 'Ordering',\n                'cloze': 'Cloze',\n                'description': 'Description'\n            };\n            return typeMap[type] || type.charAt(0).toUpperCase() + type.slice(1);\n        }\n    };\n\n    return {\n        /**\n         * Module initialization entry point\n         * @param {Object} config - Configuration object with courseid, sesskey, stats, typeDistribution\n         */\n        init: function(config) {\n            $(document).ready(function() {\n                Dashboard.init(config);\n            });\n        }\n    };\n});\n"],"names":["define","$","Ajax","Charts","Dashboard","courseid","refreshInterval","charts","init","config","this","initData","waitForApexCharts","then","initializeCharts","loadChartData","setupEventListeners","catch","Promise","resolve","ApexCharts","attempts","checkInterval","setInterval","clearInterval","stats","length","ftarGauge","createRadialChart","series","ftar","labels","colors","getFtarColor","height","plotOptions","radialBar","startAngle","endAngle","hollow","margin","size","background","track","strokeWidth","dataLabels","name","offsetY","color","fontSize","value","fontWeight","formatter","val","toFixed","typeData","typeDistribution","map","item","formatQuestionType","questiontype","parseInt","count","getQuestionTypeColor","questionType","createDonutChart","self","fetchData","data","renderAcceptanceTrendChart","renderDifficultyChart","renderBloomsCharts","renderRegenByTypeChart","action","cid","call","acceptancetrend","methodname","args","difficultydist","bloomsdist","regenbytype","response","JSON","parse","error","console","reject","empty","categories","acceptanceRates","acceptance_rates","ftarRates","ftar_rates","acceptanceTrend","createLineChart","stroke","curve","width","markers","yaxis","min","max","html","difficulties","forEach","diff","push","charAt","toUpperCase","slice","getDifficultyColor","difficulty","bloomsLabels","barColors","level","getBloomsColor","radarOptions","chart","type","fontFamily","toolbar","show","dropShadow","enabled","blur","left","top","opacity","xaxis","style","tickAmount","grid","fill","strokeColors","hover","legend","tooltip","y","radar","polygons","connectorColors","bloomsRadar","document","querySelector","render","barOptions","bar","horizontal","borderRadius","distributed","barHeight","bloomsBar","types","Object","keys","avgRegen","avg_regenerations","parseFloat","regenByType","createBarChart","on","e","preventDefault","refreshDashboard","closest","fadeOut","remove","key","destroy","multichoice","truefalse","shortanswer","essay","numerical","matching","ordering","cloze","description","ready"],"mappings":"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"}