{"version":3,"names":["define","$","AdminDashboard","charts","init","data","self","this","waitForApexCharts","then","renderCharts","catch","Promise","resolve","ApexCharts","attempts","checkInterval","setInterval","clearInterval","renderUsageTrend","renderAdoptionChart","renderBloomsChart","renderQuestionTypeChart","renderDifficultyChart","el","document","querySelector","usageTrendOptions","series","name","trendCounts","chart","type","height","toolbar","show","fontFamily","colors","dataLabels","enabled","stroke","curve","width","fill","gradient","shadeIntensity","opacityFrom","opacityTo","xaxis","categories","trendDates","labels","tooltip","x","format","usageTrend","render","adoptionOptions","activeTeachers","inactiveTeachers","legend","position","fontSize","style","fontWeight","dropShadow","top","left","blur","color","opacity","plotOptions","pie","donut","total","label","value","states","hover","filter","active","y","formatter","adoption","bloomsOptions","bloomsValues","markers","size","strokeWidth","strokeColors","bloomsLabels","yaxis","grid","blooms","questionTypeOptions","typeValues","bar","horizontal","borderRadius","columnWidth","typeLabels","questionType","difficultyOptions","difficultyValues","difficultyLabels","difficulty","ready"],"sources":["src/admindashboard.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <https://www.gnu.org/licenses/>.\n\n/**\n * AI Quiz Generator - Admin Dashboard Module\n *\n * Handles chart rendering for the admin dashboard.\n * Renders usage trend, adoption donut, Bloom's taxonomy radar,\n * question type bar, and difficulty distribution charts using ApexCharts.\n *\n * @module     local_hlai_quizgen/admindashboard\n * @copyright  2025 Human Logic Software LLC\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/* global ApexCharts */\ndefine(['jquery'], function($) {\n    'use strict';\n\n    /**\n     * Admin Dashboard controller\n     */\n    var AdminDashboard = {\n        charts: {},\n\n        /**\n         * Initialize the admin dashboard charts.\n         * @param {object} data - Chart data passed from PHP via js_call_amd.\n         */\n        init: function(data) {\n            var self = this;\n            this.waitForApexCharts().then(function() {\n                self.renderCharts(data);\n                return undefined;\n            }).catch(function() {\n                // ApexCharts loading failed silently.\n            });\n        },\n\n        /**\n         * Wait for ApexCharts library to be available.\n         * Polls every 100ms for up to 5 seconds.\n         * @returns {Promise}\n         */\n        waitForApexCharts: function() {\n            return new Promise(function(resolve) {\n                if (typeof ApexCharts !== 'undefined') {\n                    resolve();\n                    return;\n                }\n\n                var attempts = 0;\n                var maxAttempts = 50;\n                var checkInterval = setInterval(function() {\n                    attempts++;\n                    if (typeof ApexCharts !== 'undefined') {\n                        clearInterval(checkInterval);\n                        resolve();\n                    } else if (attempts >= maxAttempts) {\n                        clearInterval(checkInterval);\n                        // ApexCharts did not load in time.\n                        resolve();\n                    }\n                }, 100);\n            });\n        },\n\n        /**\n         * Render all five admin dashboard charts.\n         * @param {object} data - Chart data object.\n         */\n        renderCharts: function(data) {\n            this.renderUsageTrend(data);\n            this.renderAdoptionChart(data);\n            this.renderBloomsChart(data);\n            this.renderQuestionTypeChart(data);\n            this.renderDifficultyChart(data);\n        },\n\n        /**\n         * Render the Usage Trend area chart.\n         * @param {object} data - Chart data object.\n         */\n        renderUsageTrend: function(data) {\n            var el = document.querySelector('#usageTrendChart');\n            if (!el || typeof ApexCharts === 'undefined') {\n                return;\n            }\n\n            var usageTrendOptions = {\n                series: [{\n                    name: 'Questions Generated',\n                    data: data.trendCounts\n                }],\n                chart: {\n                    type: 'area',\n                    height: 250,\n                    toolbar: {show: false},\n                    fontFamily: 'inherit'\n                },\n                colors: ['#3B82F6'],\n                dataLabels: {enabled: false},\n                stroke: {\n                    curve: 'smooth',\n                    width: 2\n                },\n                fill: {\n                    type: 'gradient',\n                    gradient: {\n                        shadeIntensity: 1,\n                        opacityFrom: 0.4,\n                        opacityTo: 0.1\n                    }\n                },\n                xaxis: {\n                    categories: data.trendDates,\n                    labels: {show: true}\n                },\n                tooltip: {\n                    x: {format: 'dd MMM yyyy'}\n                }\n            };\n\n            this.charts.usageTrend = new ApexCharts(el, usageTrendOptions);\n            this.charts.usageTrend.render();\n        },\n\n        /**\n         * Render the Adoption donut chart.\n         * @param {object} data - Chart data object.\n         */\n        renderAdoptionChart: function(data) {\n            var el = document.querySelector('#adoptionChart');\n            if (!el || typeof ApexCharts === 'undefined') {\n                return;\n            }\n\n            var adoptionOptions = {\n                series: [data.activeTeachers, data.inactiveTeachers],\n                chart: {\n                    type: 'donut',\n                    height: 250,\n                    fontFamily: 'inherit'\n                },\n                labels: ['Active Teachers', 'Inactive Teachers'],\n                colors: ['#10B981', '#BFDBFE'],\n                legend: {\n                    position: 'bottom',\n                    fontSize: '13px'\n                },\n                dataLabels: {\n                    enabled: true,\n                    style: {\n                        fontSize: '14px',\n                        fontWeight: 600,\n                        colors: ['#1E293B']\n                    },\n                    dropShadow: {\n                        enabled: true,\n                        top: 1,\n                        left: 1,\n                        blur: 2,\n                        color: '#fff',\n                        opacity: 0.8\n                    }\n                },\n                plotOptions: {\n                    pie: {\n                        donut: {\n                            labels: {\n                                show: true,\n                                total: {\n                                    show: true,\n                                    label: 'Total Users',\n                                    fontSize: '14px',\n                                    fontWeight: 600,\n                                    color: '#334155'\n                                },\n                                value: {\n                                    fontSize: '20px',\n                                    fontWeight: 700,\n                                    color: '#1E293B'\n                                }\n                            }\n                        }\n                    }\n                },\n                states: {\n                    hover: {filter: {type: 'lighten', value: 0.05}},\n                    active: {filter: {type: 'none'}}\n                },\n                tooltip: {\n                    y: {\n                        formatter: function(value) {\n                            return value + ' teachers';\n                        }\n                    }\n                }\n            };\n\n            this.charts.adoption = new ApexCharts(el, adoptionOptions);\n            this.charts.adoption.render();\n        },\n\n        /**\n         * Render the Bloom's Taxonomy radar chart.\n         * @param {object} data - Chart data object.\n         */\n        renderBloomsChart: function(data) {\n            var el = document.querySelector('#bloomsDistributionChart');\n            if (!el || typeof ApexCharts === 'undefined') {\n                return;\n            }\n\n            var bloomsOptions = {\n                series: [{\n                    name: 'Questions',\n                    data: data.bloomsValues\n                }],\n                chart: {\n                    type: 'radar',\n                    height: 350,\n                    fontFamily: 'inherit'\n                },\n                colors: ['#3B82F6'],\n                fill: {opacity: 0.15},\n                markers: {\n                    size: 4,\n                    colors: ['#3B82F6'],\n                    strokeWidth: 2,\n                    strokeColors: '#fff'\n                },\n                xaxis: {categories: data.bloomsLabels},\n                yaxis: {show: false},\n                grid: {show: false}\n            };\n\n            this.charts.blooms = new ApexCharts(el, bloomsOptions);\n            this.charts.blooms.render();\n        },\n\n        /**\n         * Render the Question Type bar chart.\n         * @param {object} data - Chart data object.\n         */\n        renderQuestionTypeChart: function(data) {\n            var el = document.querySelector('#questionTypeChart');\n            if (!el || typeof ApexCharts === 'undefined') {\n                return;\n            }\n\n            var questionTypeOptions = {\n                series: [{\n                    name: 'Questions',\n                    data: data.typeValues\n                }],\n                chart: {\n                    type: 'bar',\n                    height: 350,\n                    toolbar: {show: false},\n                    fontFamily: 'inherit'\n                },\n                plotOptions: {\n                    bar: {\n                        horizontal: false,\n                        borderRadius: 8,\n                        columnWidth: '60%'\n                    }\n                },\n                colors: ['#06B6D4'],\n                dataLabels: {enabled: false},\n                xaxis: {categories: data.typeLabels}\n            };\n\n            this.charts.questionType = new ApexCharts(el, questionTypeOptions);\n            this.charts.questionType.render();\n        },\n\n        /**\n         * Render the Difficulty Distribution horizontal bar chart.\n         * @param {object} data - Chart data object.\n         */\n        renderDifficultyChart: function(data) {\n            var el = document.querySelector('#difficultyChart');\n            if (!el || typeof ApexCharts === 'undefined') {\n                return;\n            }\n\n            var difficultyOptions = {\n                series: [{\n                    name: 'Questions',\n                    data: data.difficultyValues\n                }],\n                chart: {\n                    type: 'bar',\n                    height: 300,\n                    toolbar: {show: false},\n                    fontFamily: 'inherit'\n                },\n                plotOptions: {\n                    bar: {\n                        horizontal: true,\n                        borderRadius: 8\n                    }\n                },\n                colors: ['#F59E0B'],\n                dataLabels: {enabled: true},\n                xaxis: {categories: data.difficultyLabels}\n            };\n\n            this.charts.difficulty = new ApexCharts(el, difficultyOptions);\n            this.charts.difficulty.render();\n        }\n    };\n\n    return {\n        /**\n         * Module initialization entry point.\n         * @param {object} data - Chart data passed from PHP.\n         */\n        init: function(data) {\n            $(document).ready(function() {\n                AdminDashboard.init(data);\n            });\n        }\n    };\n});\n"],"mappings":"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","ignoreList":[]}